{%extends 'webapp/base.html'%}

{%block content%}

<h3>Browse Cleaners</h3>
<div class="container-fluid mt-4">
  <h4>Favourite Cleaners</h4>
  {% if favourite_cleaners %}
  <table class="table table-striped table-hover align-middle">
    <thead>
      <tr>
      <th>Name</th>
      <th class="text-end">Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for cleaner in favourite_cleaners %}
        <tr>
        <td>{{ cleaner.full_name }}</td>
        <td class="text-end">
        <form method="POST" action="{% url 'browsecleaners' %}">
        {% csrf_token %}
        <input type="hidden" name="cleaner_id" value="{{ cleaner.id }}">
        <button type="submit" class="btn btn-danger btn-sm">Remove</button>
        </form>
        </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
  <p>No favourite cleaners yet.</p>
  {% endif %}
</div>
<div class="container mt-5">
  <form method="get" class="mb-4 d-flex justify-content-center">
    <input type="text" name="q" class="form-control w-50 me-2" placeholder="Search by username..." value="{{ query|default:'' }}">
    <button type="submit" class="btn btn-primary">Search</button>
  </form>

  {% if cleaners %}
    <div class="list-group">
      {% for cleaner in cleaners %}
        <a href="{% url 'cleaner_profile' cleaner.pk %}" class="list-group-item list-group-item-action">
          <h5 class="mb-1">{{ cleaner.full_name }}</h5>
          <small>{{ cleaner.phone_number }}</small>
        </a>
      {% endfor %}
    </div>
  {% else %}
    <p class="text-muted text-center">No cleaners found.</p>
  {% endif %}
</div>
{%endblock%}